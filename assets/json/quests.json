{
  "quests": [
    {
      "name": "willow",
      "steps": [
        { 
          "step": "active",
          "trigger": "room03",
          "conditions": [{ "step": "active", "complete": false }],
          "actions": [
            { "type": "say", "value": { "text": "Even the willow tree is dying" }},
            { "type": "wait", "value": 100 },
            { "type": "say", "value": { "text": "What's going on around here?!" }}
          ] 
        },
        {
          "step": "gotTear",
          "trigger": "pool",
          "conditions": [{ "step": "active", "complete": true }],
          "actions": [
            { "type": "say", "value": { "text": "I bet I could catch a tear drop" }},
            { "type": "wait", "value": 1300 },
            { "type": "say", "value": { "text": "I'll take that bet!" }},
            { "type": "move", "value": { "x": 204, "y": 88 } },
            { "type": "playAnim", "value": { "sprite": "catch", "animName": "on", "kill": true } },
            { "type": "addItem", "value": { "item": "tear", "x": 190, "y": 97} },
            { "type": "say", "value": { "text": "Now i can heal the willow tree!" }}
          ]
        },
        {
          "step": "treeHealed",
          "trigger": "willow-tear",
          "conditions": [{ "step": "gotTear", "complete": true}],
          "actions": [
            { "type": "removeItem", 
              "value": {"item": "tear" }},
            { "type": "move", 
              "value": { "x": 128, "y": 115 } },
            { "type": "say", 
              "value": { "text": "I think this tear drop should fit" }},
            { "type": "playAnim", 
              "value": { 
                "sprite": "willow", 
                "animName": "on", 
                "hide": false } },
            { "type": "altRoom", 
              "value": "room03" },
            { "type": "wait", 
              "value": 300 },
            { "type": "modAttr", 
              "value": { 
                "sprite": "player", 
                "attr": "alpha", 
                "value": 0 } },
            { "type": "sayAnim", 
              "value": { 
                "sprite": "brandon wow", 
                "animName": "on", 
                "kill": true, 
                "text": "wow!" } },
            { "type": "wait", 
              "value": 1500 },
            { "type": "modAttr", 
              "value": { 
                "sprite": "player", 
                "attr": "alpha", 
                "value": 1 } }
          ]
        } 
      ]
    },
    {
      "name": "brynn",
      "steps": [
        { 
          "step": "active",
          "trigger": "room06",
          "conditions": [{ "step": "active", "complete": false }],
          "actions": [
            { "type": "wait", "value": 4000 },
            { "type": "sayAnim", 
              "value": { 
                "sprite": "brynn-talk", 
                "animName": "talk", 
                "text": "Welcome, Brandon", 
                "color": "brynn", 
                "hide": true } },
            { "type": "wait", "value": 400 },
            { "type": "sayAnim", 
              "value": { 
                "sprite": "brynn-talk", 
                "animName": "talk", 
                "text": "Why are you always bothering me?", 
                "color": "brynn", 
                "hide": true } }
          ]
        },
        {
          "step": "amulet",
          "trigger": "altar",
          "conditions": [],
          "actions": [
            { "type": "playAnim", "value": { 
                "sprite": "amulet", 
                "animName": "on" }},
            { "type": "modAttr", "value": { 
                "sprite": "altar", 
                "attr": "alpha", 
                "value": 1 } },
            { "type": "say", 
              "value": { 
                "text": "I can feel the power!!" }}
          ]
        },
        {
          "step": "talk_1",
          "trigger": "brynn",
          "conditions": [{ "step": "talk_1", "complete": false }],
          "actions": [
            { "type": "move", "value": { "x": 93, "y": 112 }},
            { "type": "wait", "value": 100 },
            { "type": "sayAnim", 
              "value": { 
                "sprite": "brynn-talk", 
                "animName": "talk", 
                "text": "Why haven't you gotten me a rose yet?", 
                "color": "brynn", 
                "hide": true }
            },
            { "type": "wait", "value": 200 },
            { "type": "say", "value": {"text": "Oh, right..."} },
            { "type": "wait", "value": 200 },
            { "type": "move", "value": {"x": 96, "y": 112} },
            { "type": "wait", "value": 1000 },
            { "type": "move", "value": {"x": 93, "y": 112} },
            { "type": "wait", "value": 200 },
            { "type": "say", "value": {"text": "Wait, what rose?"} }
          ]
        },
        {
          "step": "talk_2",
          "trigger": "brynn",
          "conditions": [
            { "step": "talk_1", "complete": true },
            { "step": "talk_2", "complete": false }
          ],
          "actions": [
            { "type": "move", "value": { "x": 93, "y": 112 }},
            { "type": "say", "value": {"text": "Have we met before?"} },
            { "type": "wait", "value": 200 },
            { "type": "sayAnim", 
              "value": { 
                "sprite": "brynn-talk", 
                "animName": "talk", 
                "text": "Didn't I tell you already?", 
                "color": "brynn", 
                "hide": true }
            },
            { "type": "sayAnim", 
              "value": { 
                "sprite": "brynn-talk", 
                "animName": "talk", 
                "text": "I want a rose.", 
                "color": "brynn", 
                "hide": true }
            },
            { "type": "wait", "value": 300 },
            { "type": "say", "value": {"text": "Ooh, a ROSE!"} },
            { "type": "wait", "value": 1000 },
            { "type": "say", "value": {"text": "I thought you said ARROWS."} },
            { "type": "wait", "value": 200 },
            { "type": "playAnim", "value": { 
              "sprite": "brynn-talk", 
              "animName": "turn-right" } },
            { "type": "wait", "value": 1000 },
            { "type": "playAnim", "value": { 
              "sprite": "brynn-talk", 
              "animName": "turn-left" } },
            { "type": "playAnim", "value": { 
              "sprite": "brynn-talk", 
              "animName": "turn-right" } },
            { "type": "wait", "value": 1000 },
            { "type": "sayAnim", 
              "value": { 
                "sprite": "brynn-talk", 
                "animName": "talk", 
                "text": "Was that a joke?", 
                "color": "brynn", 
                "hide": true }
            }
          ]
        },
        {
          "step": "rose",
          "trigger": "",
          "conditions": [],
          "actions": [
            { "type": "sayAnim", 
              "value": { 
                "sprite": "brynn-talk", 
                "animName": "talk", 
                "text": "What a perfect rose!", 
                "color": "brynn", 
                "hide": true }
            },
            { "type": "wait", "value": 1000 },
            { "type": "sayAnim", 
              "value": { 
                "sprite": "brynn-talk", 
                "animName": "talk", 
                "text": "So you didn't find any arrows?", 
                "color": "brynn", 
                "hide": true }
            },
            { "type": "wait", "value": 500 },
            { "type": "turn", "value": {"direction": "right"} },
            { "type": "wait", "value": 500 },
            { "type": "turn", "value": {"direction": "left"} },
            { "type": "wait", "value": 1000 },
            { "type": "say", "value": {"text": "Was that a joke?"} }
          ]
        } 
      ]
    },
    {
      "name": "bridge",
      "steps": [
        {
          "step": "cave",
          "trigger": "room19",
          "conditions": [],
          "actions": [
            { "type": "putSprite", 
              "value": {
                "sprite": "herman", 
                "x": 207, 
                "y": 52,
                "layer": "foreground" }},
            { "type": "wait", "value": 300 },
            { "type": "playAnim", 
              "value": { 
                "sprite": "herman", 
                "animName": "hunch-scratch-head" }},
            { "type": "wait", "value": 500 },
            { "type": "sayAnim", 
              "value": { 
                "sprite": "herman", 
                "animName": "talk-hunch-turn", 
                "text": "Oh, Brandon!", 
                "color": "herman" }},
            { "type": "playAnim", 
              "value": { 
                "sprite": "herman", 
                "animName": "hunching-rise" }},
                { "type": "wait", "value": 200 },
            { "type": "sayAnim", 
              "value": { 
                "sprite": "herman", 
                "animName": "talk-turn", 
                "text": "The river is stuck, try again later.", 
                "color": "herman" }},
            { "type": "wait", "value": 200 },
            { "type": "playAnim", 
              "value": { 
                "sprite": "herman", 
                "animName": "hunching-lower" }},
            { "type": "wait", "value": 200 },
            { "type": "playAnim", 
              "value": { 
                "sprite": "herman", 
                "animName": "hunch-scratch-head" }}
          ]
        },
        {
          "step": "saw",
          "trigger": "saw_holder",
          "conditions": [],
          "actions": [
            { "type": "say", "value": { "text": "Grandfather's saw" }},
            { "type": "killSprite", "value": "saw_holder" },
            { "type": "modMeta", "value": { 
                "sprite": "saw_holder_empty", 
                "attr": "invisible", 
                "value": false } },
            { "type": "modAttr", "value": { 
                "sprite": "saw_holder", 
                "attr": "alpha", 
                "value": 0 } },
            { "type": "modAttr", "value": { 
                "sprite": "saw_holder_empty", 
                "attr": "alpha", 
                "value": 1 } },
            { "type": "addItem", "value": {
                "item": "saw", 
                "x": 250, 
                "y": 113} }
          ]
        },
        {
          "step": "giveSaw",
          "trigger": "herman-saw",
          "conditions": [],
          "actions": [
            { "type": "removeItem", "value": { "item": "saw" }},
            { "type": "move", "value": { 
                "x": 256, "y": 93 }},
            { "type": "playAnim", "value": { 
                "sprite": "herman", 
                "animName": "hunching-rise" } },
            { "type": "sayAnim", "value": { 
                "sprite": "herman", 
                "animName": "talk-turn", 
                "text": "That's a pretty old saw", 
                "color": "herman" } },
            { "type": "playAnim", "value": { 
                "sprite": "herman", 
                "animName": "stand-idle" } },
            { "type": "say", 
                "value": {
                  "text": "Oh, this is just a stiff old sock" }},
            { "type": "say", 
                "value": {
                  "text": "But it could probably cut down a tree now" }},
            { "type": "wait", "value": 200 },
            { "type": "sayAnim", "value": { 
                "sprite": "herman", 
                "animName": "talk-turn", 
                "text": "Uh, yeah ...", 
                "color": "herman" } },
            { "type": "sayAnim", "value": { 
                "sprite": "herman", 
                "animName": "talk-turn", 
                "text": "Well, I'll go cut down some trees then", 
                "color": "herman" } },
            { "type": "wait", "value": 100 },
            { "type": "moveSprite", "value": { 
                "sprite": "herman", 
                "path": [[95, 26], [120, 26]], 
                "animName": "walk" } },
            { "type": "turn", "value": "right" },
            { "type": "wait", "value": 900 },
            { "type": "say", "value": { "text": "I hope he doesn't cut his leg off" }},
            { "type": "togAnim", "value": { 
                "sprite": "herman sawing", 
                "animName": "saw", 
                "start": true } }
          ]
        },
        {
          "step": "fixed",
          "trigger": "room02",
          "conditions": [{ "step": "giveSaw", "complete": true }],
          "actions": [
            { "type": "say", "value": { "text": "I wonder if the bridge is fixed..." }},
            { "type": "altRoom", "value": "room19" },
            { "type": "modMeta", "value": { 
              "sprite": "cut tree", "attr": "invisible", "value": false } },
            { "type": "modMeta", "value": { 
              "sprite": "herman sawing", "attr": "invisible", "value": true } },
            { "type": "modAttr", "value": { 
              "sprite": "herman sawing", "attr": "inputEnabled", "value": false } }
          ]
        },
        {
          "step": "complete",
          "trigger": "room19",
          "conditions": [{ "step": "fixed", "complete": true }],
          "actions": [
            { "type": "say", "value": { "text": "The bridge is repaired!" }},
            { "type": "move", "value": { "x": 253, "y": 100 }},
            { "type": "say", "value": { "text": "But where did Herman go? ..." }},
            { "type": "wait", "value": 1000 },
            { "type": "quit", "value": true }
          ]
        } 
      ]
    }
  ]
}